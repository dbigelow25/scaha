<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui" 
     xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<f:view contentType="text/html">
<h:head>
	 <f:facet name="first">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
     </f:facet>
	
</h:head>
<h:body >	
<ui:composition template="/WEB-INF/templates/layout.xhtml">
<ui:define name="content">
	<p:panel header="Player Stats" footer="brought to you by iScaha">
	<h:form id="form">
	Leaders for:
	<p:selectOneMenu value="#{statsBean.selecteddivision}" style="min-width:200px;overflow:hidden !important;">
	   <f:selectItem itemLabel="Select One" itemValue="0"/>
	   <f:selectItems value="#{statsBean.getListofDivisions()}" var="division" itemLabel="#{division.getDivisionname()}" itemValue="#{division.getIddivision()}"/>
	   <p:ajax process="@this" listener="#{statsBean.loadLeaders()}" event="change" update=":form"  />
	</p:selectOneMenu>
	<p:selectOneMenu value="#{statsBean.selectedyear}" >
	   <f:selectItem itemLabel="Select One" itemValue="0"/>
	   <f:selectItem itemLabel="2014" itemValue="2015"/>
	   <f:selectItem itemLabel="2014" itemValue="2014"/>
	   <f:selectItem itemLabel="2013" itemValue="2013"/>
	   <f:selectItem itemLabel="2012" itemValue="2012"/>
	   <f:selectItem itemLabel="2011" itemValue="2011"/>
	   <f:selectItem itemLabel="2010" itemValue="2010"/>
	   <p:ajax process="@this" listener="#{statsBean.loadLeaders()}" event="change" update=":form"  />
	</p:selectOneMenu>
	
	<p:layout id="layout" style="min-height:600px;overflow:hidden !important;">
 		<p:layoutUnit id="left" position="west" size="525" resizable="false" closable="false" collapsible="false" header="Offensive Leaders" >
			<p:dataTable id="playerpoints" var="stat" value="#{statsBean.getPlayerpoints()}" headerText="Points">
                <f:facet name="header">
			        Points
			    </f:facet>
                <p:column headerText="#" style="width:25px;">  
	                <h:outputText value="#{stat.getRank()}" />
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getPlayername()}" />  
		        </p:column>
		        <p:column headerText="Team">  
		        	<h:outputText value="#{stat.getTeamname()}" />  
		        </p:column>
		        <p:column headerText="Pts">  
		        	<h:outputText value="#{stat.getPoints()}" />  
		        </p:column>
		        <f:facet name="footer">
			        <p:commandLink style="font-size: 12px;" value="View Complete Leaders" >  
    	            	 <p:ajax process="@this" listener="#{statsBean.loadCompletePlayerStats('Points')}" event="click" update=":form" oncomplete="PF('peepdlg').show()"  />
   		            </p:commandLink>
   		        </f:facet>
                
			 </p:dataTable>
			 <br></br>
			<p:dataTable id="playergoals" var="stat" value="#{statsBean.getPlayergoals()}" headerText="Goals">
                <f:facet name="header">
			        Goals
			    </f:facet>
                
            	<p:column headerText="#" style="width:25px;">  
	                <h:outputText value="#{stat.getRank()}" /> 
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getPlayername()}" />  
		        </p:column>
		        <p:column headerText="Team">  
		        	<h:outputText value="#{stat.getTeamname()}" />  
		        </p:column>
		        <p:column headerText="G">  
		        	<h:outputText value="#{stat.getGoals()}" />  
		        </p:column>
		        <f:facet name="footer">
			        <p:commandLink style="font-size: 12px;" value="View Complete Leaders" >  
    	            	 <p:ajax process="@this" listener="#{statsBean.loadCompletePlayerStats('Goals')}" event="click" update=":form" oncomplete="PF('peepdlg').show()"  />
   		            </p:commandLink>
   		        </f:facet>
                
			 </p:dataTable>
			 <br></br>
			 <p:dataTable id="playerassists" var="stat" value="#{statsBean.getPlayerassists()}" headerText="Assists">
                <f:facet name="header">
			        Assists
			    </f:facet>
                
            	<p:column headerText="#" style="width:25px;">  
	                <h:outputText value="#{stat.getRank()}" /> 
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getPlayername()}" />  
		        </p:column>
		        <p:column headerText="Team">  
		        	<h:outputText value="#{stat.getTeamname()}" />  
		        </p:column>
		        <p:column headerText="A">  
		        	<h:outputText value="#{stat.getAssists()}" />  
		        </p:column>
		        <f:facet name="footer">
			        <p:commandLink style="font-size: 12px;" value="View Complete Leaders" >  
    	            	 <p:ajax process="@this" listener="#{statsBean.loadCompletePlayerStats('Assists')}" event="click" update=":form" oncomplete="PF('peepdlg').show()"  />
   		            </p:commandLink>
   		        </f:facet>
                
			 </p:dataTable>
			 	 
		</p:layoutUnit>
		
		<p:layoutUnit id="center" position="center" header="Goalie Leaders">
			<p:dataTable id="goaliesva" var="stat" value="#{statsBean.getPlayergaa()}" headerText="Goals Against Average">
                <f:facet name="header">
			        Goals Against Average
			    </f:facet>
                
                <p:column headerText="#" style="width:25px;">  
	                <h:outputText value="#{stat.getRank()}" /> 
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getPlayername()}" />  
		        </p:column>
		        <p:column headerText="Team">  
		        	<h:outputText value="#{stat.getTeamname()}" />  
		        </p:column>
		        <p:column headerText="GAA">  
		        	<h:outputText value="#{stat.getGaa()}" />  
		        </p:column>
		        <f:facet name="footer">
			        <p:commandLink style="font-size: 12px;" value="View Complete Leaders" >  
    	            	 <p:ajax process="@this" listener="#{statsBean.loadCompleteGoalieStats('GAA')}" event="click" update=":form" oncomplete="PF('goaliepeepdlg').show()"  />
   		            </p:commandLink>
   		        </f:facet>
                
			 </p:dataTable>
			 <br></br>
			<p:dataTable id="goaliesavepercentage" var="stat" value="#{statsBean.getPlayersavepercentage()}" headerText="Save Percentage">
                <f:facet name="header">
			        Save Percentage
			    </f:facet>
                
                <p:column headerText="#" style="width:25px;">  
	                <h:outputText value="#{stat.getRank()}" /> 
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getPlayername()}" />  
		        </p:column>
		        <p:column headerText="Team">  
		        	<h:outputText value="#{stat.getTeamname()}" />  
		        </p:column>
		        <p:column headerText="SV%">  
		        	<h:outputText value="#{stat.getSavepercentage()}" />  
		        </p:column>
		        <f:facet name="footer">
			        <p:commandLink style="font-size: 12px;" value="View Complete Leaders" >  
    	            	 <p:ajax process="@this" listener="#{statsBean.loadCompleteGoalieStats('Percentage')}" event="click" update=":form" oncomplete="PF('goaliepeepdlg').show()"  />
   		            </p:commandLink>
   		        </f:facet>
                
			 </p:dataTable>
			 <!-- <br></br>
			 <p:dataTable id="goaliewins" var="stat" value="#{statsBean.getPlayerwins()}" headerText="Wins">
                
            	<p:column headerText="#" style="width:25px;">  
	                   	<f:facet name="output"><h:outputText value="#{stat.rank}" /></f:facet>  
	            </p:column>  
		        <p:column headerText="Name">  
		        	<h:outputText value="#{stat.getName()}" />  
		        </p:column>
		        <p:column headerText="W">  
		        	<h:outputText value="#{stat.getWins()}" />  
		        </p:column>
			 </p:dataTable> -->
			 <p:dialog id="dialog" header="Complete Leaders" widgetVar="peepdlg" resizable="false"  
              width="700" height="400" showEffect="clip" hideEffect="fold">
           			Select Game Type:
           			<p:selectOneMenu value="#{statsBean.selectedgametype}" >
					   <f:selectItem itemLabel="Regular" itemValue="2"/>
					   <f:selectItem itemLabel="Playoff" itemValue="4"/>
					   <p:ajax process="@this" listener="#{statsBean.loadCompletePlayerStats('Points')}" event="change" update="detailedplayers"  />
					</p:selectOneMenu>
		 			Number of Players to Display:	
	 				<p:selectOneMenu value="#{statsBean.selectedcount}" >
					   <f:selectItem itemLabel="10" itemValue="10"/>
					   <f:selectItem itemLabel="25" itemValue="25"/>
					   <f:selectItem itemLabel="50" itemValue="50"/>
					   <f:selectItem itemLabel="100" itemValue="100"/>
					   <f:selectItem itemLabel="200+" itemValue="500"/>
					   <p:ajax process="@this" listener="#{statsBean.loadCompletePlayerStats('Points')}" event="change" update="detailedplayers"  />
					</p:selectOneMenu>
             		<p:dataTable id="detailedplayers" var="stat" rows="10"
                         paginator="true" value="#{statsBean.getCompleteplayers()}" headerText="Points">
		                <f:facet name="header">
					        <h:outputText value="#{statsBean.getDisplaycompletetitle()}" />
					    </f:facet>
		                <p:column headerText="#" style="width:25px;">  
			                <h:outputText value="#{stat.getRank()}" />
			            </p:column>  
				        <p:column headerText="Name" sortBy="playername" filterBy="playername" filterMatchMode="contains" filterStyle="width:70px">  
				        	<h:outputText value="#{stat.getPlayername()}" />  
				        </p:column>
				        <p:column headerText="Team" sortBy="teamname" filterBy="teamname" filterMatchMode="contains" filterStyle="width:70px">  
				        	<h:outputText value="#{stat.getTeamname()}" />  
				        </p:column>
				        <p:column headerText="GP">  
				        	<h:outputText value="#{stat.getGp()}" />  
				        </p:column>
				        <p:column headerText="G" >  
				        	<h:outputText value="#{stat.getGoals()}" />  
				        </p:column>
				        <p:column headerText="A" >  
				        	<h:outputText value="#{stat.getAssists()}" />  
				        </p:column>
				        <p:column headerText="Pts" >  
				        	<h:outputText value="#{stat.getPoints()}" />  
				        </p:column>
				        <p:column headerText="PIMS" >  
				        	<h:outputText value="#{stat.getPims()}" />  
				        </p:column>
				     </p:dataTable>
				     <br></br>
			  		<div align="center"><p:commandButton id="closeplayers" value="Close" onclick="peepdlg.hide()" /></div>
              </p:dialog>
              
              <p:dialog id="goaliedialog" header="Complete Leaders" widgetVar="goaliepeepdlg" resizable="false"  
              width="700" height="410" showEffect="clip" hideEffect="fold">
             		Select Game Type:
           			<p:selectOneMenu value="#{statsBean.selectedgametype}" >
					   <f:selectItem itemLabel="Regular" itemValue="2"/>
					   <f:selectItem itemLabel="Playoff" itemValue="4"/>
					   <p:ajax process="@this" listener="#{statsBean.loadCompleteGoalieStats('Percentage')}" event="change" update="detailedgoalies"  />
					</p:selectOneMenu>
		 			Number of Players to Display:	
	 				<p:selectOneMenu value="#{statsBean.selectedcount}" >
					   <f:selectItem itemLabel="10" itemValue="10"/>
					   <f:selectItem itemLabel="25" itemValue="25"/>
					   <f:selectItem itemLabel="50" itemValue="50"/>
					   <f:selectItem itemLabel="100" itemValue="100"/>
					   <f:selectItem itemLabel="200+" itemValue="500"/>
					   <p:ajax process="@this" listener="#{statsBean.loadCompleteGoalieStats('Percentage')}" event="change" update="detailedgoalies"  />
					</p:selectOneMenu>
             		<p:dataTable id="detailedgoalies" var="stat" rows="10"
                         paginator="true" value="#{statsBean.getCompletegoalies()}" headerText="Save %">
		                <f:facet name="header">
					        Goalie Stats
					    </f:facet>
		                <p:column headerText="#" style="width:25px;">  
			                <h:outputText value="#{stat.getRank()}" />
			            </p:column>  
				        <p:column headerText="Name" sortBy="playername" filterBy="playername" filterMatchMode="contains" filterStyle="width:70px">  
				        	<h:outputText value="#{stat.getPlayername()}" />  
				        </p:column>
				        <p:column headerText="Team" sortBy="teamname" filterBy="teamname" filterMatchMode="contains" filterStyle="width:70px">  
				        	<h:outputText value="#{stat.getTeamname()}" />  
				        </p:column>
				        <p:column headerText="GP" >  
				        	<h:outputText value="#{stat.getGp()}" />  
				        </p:column>
				        <p:column headerText="Mins" >  
				        	<h:outputText value="#{stat.getMins()}" />  
				        </p:column>
				        <p:column headerText="Shots">  
				        	<h:outputText value="#{stat.getShots()}" />  
				        </p:column>
				        <p:column headerText="Saves">  
				        	<h:outputText value="#{stat.getSaves()}" />  
				        </p:column>
				        <p:column headerText="SV%">  
				        	<h:outputText value="#{stat.getSavepercentage()}" />  
				        </p:column>
				        <p:column headerText="GAA">  
				        	<h:outputText value="#{stat.getGaa()}" />  
				        </p:column>
				     </p:dataTable>
			  		<br></br>
			  		<div align="center"><p:commandButton id="closegoalies" value="Close" onclick="goaliepeepdlg.hide()" /></div>
              </p:dialog>
		</p:layoutUnit>
		
		
	</p:layout>
	</h:form>
	</p:panel>
</ui:define>
</ui:composition>
</h:body>
</f:view>
</html>