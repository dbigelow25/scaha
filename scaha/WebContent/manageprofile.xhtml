<!DOCTYPE html>
<html lang="en"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
>
<f:view contentType="text/html">
    
 <h:head>
	 <f:facet name="first">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
     </f:facet>
	<f:metadata>
		<f:event type="preRenderView" listener="#{profileBean.verifyUserLogin()}" />
	</f:metadata>
</h:head>	    
<h:body>
<ui:composition template="/WEB-INF/templates/layout.xhtml">
<ui:define name="content">

	<!-- 
	
	This section is a common tabbed menu.  We tried to use TabView in one giant xhtml file.. but it became too complex
	To manage.
	
	We have 4 basic functions.  One tab for each function.  Each file will have a different active index.. and a 
	Star icon helping the user understand what area they are in...
	
	 -->  
<div id="page-div">	 
 <p:tabMenu activeIndex="0">  
    <p:menuitem value="My Profile" url="manageprofile.xhtml" icon="ui-icon-star" />  
    <p:menuitem value="Scaha Membership" url="membermanagement.xhtml" />  
    <p:menuitem value="Change Password" url="changepassword.xhtml"/>  
</p:tabMenu>  

<p:spacer width="10" height="10" />
	
	<h:form id = "me-form">
	
	<ui:fragment id="view-pers" rendered="#{profileBean.isViewPerson()}">
	
  		<p:fieldset id="fs1" toggleable="false" toggleSpeed="500">  
    	      <h:outputText style="font-size: 12px;" value="The following information is your personal account information.  Please change any contact
                                                       you need to.  The only thing you cannot change is your usercode. "/>  
   		</p:fieldset>  
	
	  	<p:spacer width="10" height="10" />
  	
  		<p:fieldset id="fs2" toggleable="false" toggleSpeed="500">  	
  		
         	<p:panelGrid id ="view-pers-grid" columns="2" cellpadding="5">  
            	<h:outputText value="User Name (e-mail):" />
            	<h:outputText value="#{profileBean.getUserName()}" />
            	<h:outputText value="Name:" />
            	<h:outputText value="#{profileBean.getCompleteName()}" />
            	<h:outputText value="Nick Name:" />
            	<h:outputText value="#{profileBean.getNickName()}" />
            	<h:outputText value="Gender:" />
            	<h:outputText value="#{profileBean.getGender()}"/>
            	<h:outputText value="Birth Day:" />
            	<h:outputText value="#{profileBean.getDOB()}"/>
            	<h:outputText value="Phone Number:" />
            	<h:outputText value="#{profileBean.getPhoneNumber()}"/>
            	<h:outputText value="Alt Email:" />
            	<h:outputText value="#{profileBean.getAltemail()}"/>
            	<h:outputText value="Address:" />
            	<h:outputText value="#{profileBean.getCompleteAddress()}" />
            </p:panelGrid>  
		</p:fieldset>

	  	<p:spacer width="10" height="10" />

		<p:fieldset id="fs3">
             <p:commandButton update="edit-pers-grid" value="Edit This Data" id="show-edit-per" ajax="false"  
             actionListener="#{profileBean.setEditPerson()}"/> 
         </p:fieldset>

	</ui:fragment>

	<ui:fragment id="edit-pers" rendered="#{profileBean.isEditPerson()}">
	
	<p:focus context="edit-pers"/> 
	<p:fieldset id="fs4" toggleable="false" toggleSpeed="500">  
          <h:outputText style="font-size: 12px;" value="When you have completed making your changes, please click the Update Information button."/>
   	</p:fieldset>  

	<p:spacer width="10" height="10" />
	
	<p:fieldset id="fs5">
		
			<p:panelGrid columns="3" cellpadding="3" id="edit-pers-grid">  
		
					<p:outputLabel for="username" value="User Name (e-mail):" />
					<p:inputText id="username" style="width:150px;" value="#{profileBean.chgUserName}">
					
					</p:inputText>
					<p:message id="m_username" style="font-size:12pt;" for="username" />
		
					<p:outputLabel for="firstname" value="First Name"></p:outputLabel>
					<p:inputText id="firstname" style="width:150px;" value="#{profileBean.chgFirstName}" />
					<p:message id="m_firstname" closable="true" for="firstname"/>
					
					<p:outputLabel for="lastname" value="Last Name" ></p:outputLabel>
					<p:inputText id="lastname" style="width:150px;" value="#{profileBean.chgLastName}" />
					<p:message id="m_lastname" closable="true" for="lastname"/>
					
					<p:outputLabel for="nickname" value="Nick Name"></p:outputLabel>
					<p:inputText id="nickname" style="width:150px;" value="#{profileBean.chgNickName}"/>
					<p:message id="m_nickname" closable="false" for="nickname"/>

					<p:outputLabel for="dob"  value="Date of Birth:"></p:outputLabel>
					<p:inputMask id="dob" value="#{profileBean.chgDOB}" style="width:150px;" mask="99/99/9999" />  
					<p:message id="m_dob" closable="false" for="dob"/>

					<p:outputLabel for="gender" value="Gender:" ></p:outputLabel>
				    <p:selectOneMenu id="gender" value="#{profileBean.chgGender}">  
			            <f:selectItem itemLabel="Male" itemValue="M"></f:selectItem> 
           				<f:selectItem itemLabel="Female" itemValue="F"></f:selectItem> 
      				</p:selectOneMenu> 		
      				<p:message id="m_gender" closable="true" for="gender"/>			

					<p:outputLabel for="email" value="alternate eMail:"></p:outputLabel>
					<p:inputText id="email" style="width:150px;" value="#{profileBean.chgAltEmail}" />
					<p:message id="m_email" closable="true" for="email"/>

					<p:outputLabel for="phone"  value="Mobile Phone"></p:outputLabel>
					<p:inputMask id="phone" value="#{profileBean.chgPhone}" style="width:150px;" mask="(999) 999-9999" />  
					<p:message id="m_phone" closable="true" for="phone"/>

			</p:panelGrid>

			<p:panelGrid columns="4" cellpadding="3" id="edit-pers-addr-grid">
					<p:outputLabel for="address" value="Address"></p:outputLabel>
					<p:outputLabel for="city" value="City"></p:outputLabel>
					<p:outputLabel for="state" value="State"></p:outputLabel>
					<p:outputLabel for="zip" value="Zip"></p:outputLabel>
					<p:inputText id="address" style="width:175px;" value="#{profileBean.chgAddress}" />
					<p:inputText id="city" style="width:175px;" value="#{profileBean.chgCity}" />
					<p:inputMask  id="state" style="width:25px;" maxlength="2" value="#{profileBean.chgState}" mask="aa"/>
					<p:inputMask id="zip" style="width:75px;" maxlength="5" value="#{profileBean.chgZip}" mask="99999"/>
			</p:panelGrid>
			
		</p:fieldset>
			
		<p:spacer width="10" height="10" />

		<p:fieldset id="fs6">

			<p:spacer width="13" height="10" />
             <p:commandButton value="Update Information" update="edit-pers,view-pers" id="finish-edit-per" ajax="false"  
             actionListener="#{profileBean.updatePersonInfo()}"/>
             			
			<p:commandButton value="Cancel" update="edit-pers,view-pers" id="cancel-edit-per"  actionListener="#{profileBean.setNotEditPerson()}" immediate="true" ajax="false">  
       			 <p:resetInput target="fs5" />  
    		</p:commandButton>  


		</p:fieldset>
	  	<p:spacer width="10" height="10" />
	</ui:fragment>
	</h:form>
	</div>
</ui:define>
</ui:composition>
</h:body>
</f:view>
</html>
