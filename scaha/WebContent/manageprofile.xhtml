<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">

<f:metadata>
<f:event type="preRenderView" listener="#{profileBean.verifyUserLogin()}" />
</f:metadata>
      
<ui:composition template="/WEB-INF/templates/layout.xhtml">


<ui:define name="content">
  
  <p:tabMenu activeIndex="0">  
    <p:menuitem value="My Information" url="manageprofile.xhtml" icon="ui-icon-star" />  
    <p:menuitem value="Scaha Membership" url="membermanagement.xhtml" />  
    <p:menuitem value="My Roles" url="/ui/tabMenuDocumentation.jsf" />  
    <p:menuitem value="Support" url="/ui/tabMenuSupport.jsf"/>  
    <p:menuitem value="Social" url="/ui/tabMenuSocial.jsf" />  
	</p:tabMenu>  

	<p:separator id="separator"/>
 
 	<h:form id = "me-form">
  	
  		<h:panelGroup id="view-pers" rendered="#{profileBean.isViewPerson()}">
  		
         	<p:panelGrid id ="view-pers-grid" columns="2" cellpadding="5">  
            	<h:outputText value="User Name (e-mail):" />
            	<h:outputText value="#{profileBean.getUserName()}" />
            	<h:outputText value="Name:" />
            	<h:outputText value="#{profileBean.getCompleteName()}" />
            	<h:outputText value="Nick Name:" />
            	<h:outputText value="#{profileBean.getNickName()}" />
            	<h:outputText value="Gender:" />
            	<h:outputText value="#{profileBean.getGender()}"/>
            	<h:outputText value="Birth Day:" />
            	<h:outputText value="#{profileBean.getDOB()}"/>
            	<h:outputText value="Phone Number:" />
            	<h:outputText value="#{profileBean.getPhoneNumber()}"/>
            	<h:outputText value="Alt Email:" />
            	<h:outputText value="#{profileBean.getAltemail()}"/>
            	<h:outputText value="Address:" />
            	<h:outputText value="#{profileBean.getCompleteAddress()}" />
            </p:panelGrid>  
	         <p:separator id="separator22"/>
             <p:commandButton value="Edit This Data" update="view-pers,edit-per" id="show-edit-per" ajax="false"  
             actionListener="#{profileBean.setEditPerson()}"/> 
             <p:spacer width="10" height="10" />
             <p:commandButton value="Change your password" update="view-pers,edit-pass" id="show-edit-pass" ajax="false"  
             actionListener="#{profileBean.setEditPassword()}"/>  
       </h:panelGroup>

	<h:panelGroup id="edit-pers" rendered="#{profileBean.isEditPerson()}">
		<p:focus context="edit-pers"/> 
			<p:panelGrid columns="3" cellpadding="3" id="edit-pers-grid">  
					<p:outputLabel for="firstname" value="First Name"></p:outputLabel>
					<p:inputText id="firstname" style="width:150px;" value="#{profileBean.chgFirstName}" />
					<p:message id="m_firstname" closable="true" for="firstname"/>
					
					<p:outputLabel for="lastname" value="Last Name" ></p:outputLabel>
					<p:inputText id="lastname" style="width:150px;" value="#{profileBean.chgLastName}" />
					<p:message id="m_lastname" closable="true" for="lastname"/>
					
					<p:outputLabel for="nickname" value="Nick Name"></p:outputLabel>
					<p:inputText id="nickname" style="width:150px;" value="#{profileBean.chgNickName}"/>
					<p:message id="m_nickname" closable="true" for="nickname"/>

					<p:outputLabel for="dob"  value="Date of Birth:"></p:outputLabel>
					<p:inputMask id="dob" value="#{profileBean.chgDOB}" style="width:150px;" mask="9999/99/99" />  
					<p:message id="m_dob" closable="true" for="dob"/>

					<p:outputLabel for="gender" value="Gender:" ></p:outputLabel>
				    <p:selectOneMenu id="gender" value="#{profileBean.chgGender}">  
			            <f:selectItem itemLabel="Male" itemValue="M"></f:selectItem> 
           				<f:selectItem itemLabel="Female" itemValue="F"></f:selectItem> 
      				</p:selectOneMenu> 		
      				<p:message id="m_gender" closable="true" for="gender"/>			

					<p:outputLabel for="email" value="alternate eMail:"></p:outputLabel>
					<p:inputText id="email" style="width:150px;" value="#{profileBean.chgAltEmail}" />
					<p:message id="m_email" closable="true" for="email"/>

					<p:outputLabel for="phone"  value="Mobile Phone"></p:outputLabel>
					<p:inputMask id="phone" value="#{profileBean.chgPhone}" style="width:150px;" mask="(999) 999-9999" />  
					<p:message id="m_phone" closable="true" for="phone"/>

			</p:panelGrid>

			<p:panelGrid columns="4" cellpadding="3" id="edit-pers-addr-grid">
					<p:outputLabel for="address" value="Address"></p:outputLabel>
					<p:outputLabel for="city" value="City"></p:outputLabel>
					<p:outputLabel for="state" value="State"></p:outputLabel>
					<p:outputLabel for="zip" value="Zip"></p:outputLabel>
					<p:inputText id="address" style="width:175px;" value="#{profileBean.chgAddress}" />
					<p:inputText id="city" style="width:175px;" value="#{profileBean.chgCity}" />
					<p:inputText id="state" style="width:25px;" maxlength="2" value="#{profileBean.chgState}" />
					<p:inputText id="zip" style="width:75px;" maxlength="5" value="#{profileBean.chgZip}" />
			</p:panelGrid>
			<p:separator id="separator32"/> 

			(<p:commandLink value="Cancel" update="edit-pers,view-pers" id="cancel-edit-per" ajax="false"  
             actionListener="#{profileBean.setNotEditPerson()}">
             	<p:ajax update="edit-pers" resetValues="true" />   
             </p:commandLink>)
             
			<p:spacer width="10" height="10" />
             (<p:commandLink value="Update Info" update="edit-pers,view-pers" id="finish-edit-per" ajax="false"  
             actionListener="#{profileBean.updatePersonInfo()}"/>)    

            </h:panelGroup>

		<h:panelGroup id="edit-pass" rendered="#{profileBean.isEditPassword()}">

			<p:panelGrid columns="3" cellpadding="3">

				<p:outputLabel for="cur-pass" value="Current Password:" />
				<h:inputSecret id="cur-pass" style="width:150px;"
					value="#{profileBean.cur_password}" required="true"
					requiredMessage="Current Password cannot be blank.">
					<f:validator validatorId="validateLivePassword" />
					<f:ajax event="blur" render="m_current" />
				</h:inputSecret>
				<p:message id="m_current" for="cur-pass" />

				<p:outputLabel for="new-pass" value="New Password:" />
				<p:password id="new-pass" style="width:150px;"
					value="#{profileBean.new_password}" required="true"
					requiredMessage="New Password cannot be blank." />
				<p:spacer width="40" height="10" />

				<p:outputLabel for="con-pass" value="Confirm New Password:" />
				<p:password id="con-pass" style="width:150px;"
					value="#{profileBean.con_password}" required="true"
					requiredMessage="Confirm Password cannot be blank." />
				<p:message id="m_confirm" for="finish-edit-pass" />

			</p:panelGrid>

			<p:spacer width="40" height="30" />
			
			<p:commandButton value="Cancel" update="edit-pass,view-pers"
				id="cancel-edit-pass" ajax="false" immediate="true"
				actionListener="#{profileBean.setNotEditPassword()}">
				<p:resetInput target="edit-pass" />
			</p:commandButton>)
  
    		<p:spacer width="10" height="10" />
             <p:commandButton global="false" value="Save Changes"
				update="edit-pass,view-pers" id="finish-edit-pass" ajax="false"
				actionListener="#{profileBean.updatePasswordInfo()}" />   

            </h:panelGroup>
            
            </h:form>
	</ui:define>
</ui:composition>
</html>
